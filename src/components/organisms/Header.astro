---
import { sectionClasses } from "@/components/organisms/styles/section-styles";
import marked from "@/lib/marked";
import { removeSlash } from "@/lib/path";
import { cn } from "@/lib/tailwind-class";
import { notebookToc } from "@/notebook-content";

// Context
const currentPath = removeSlash(Astro.url.pathname);

// Data
const notebookMarkdownToc = notebookToc.reduce(
  (acc, { label, href, depth }) => {
    const indent = "  ".repeat(depth - 2);
    return acc + `${indent}- [${label}](${href})\n`;
  },
  "",
);

// eslint-disable-next-line @typescript-eslint/no-unused-vars
const tocContent = marked.parse(notebookMarkdownToc);

// Styles
const headerLinkClassname = cn(
  "group relative flex h-full w-28 items-center justify-center text-center transition-colors hover:text-slate-400 focus:text-slate-400 data-[selected=true]:text-slate-400",
  "after:absolute after:top-[75%] after:block after:h-1 after:w-0 after:bg-slate-400 after:transition-[width] after:content-[''] data-[selected=false]:hover:after:w-full",
);
---

<div
  class="h-header-h fixed top-0 left-0 z-50 w-full bg-slate-900/75 backdrop-blur-lg"
>
  <header class:list={[sectionClasses, "h-full"]}>
    <nav class="flex h-full items-center justify-center gap-1">
      <a
        class={headerLinkClassname}
        href="/"
        data-selected={currentPath === "/"}
      >
        Modelo
      </a>

      <a
        class={headerLinkClassname}
        href="/notebook"
        data-selected={currentPath === "/notebook"}
      >
        Notebook
      </a>
    </nav>
  </header>
</div>
